<!doctype html>
<html>
<head>
	<script type="text/javascript" src="/homey.js" data-origin="settings"></script>
	<script type="text/javascript" src="/manager/webserver/assets/js/jquery.js"></script>

	<script type="text/javascript" src="init.js"></script>
	<script type="text/javascript" src="help.js"></script>
	<script type="text/javascript" src="homey_get_set.js"></script>
	<script type="text/javascript" src="color_func.js"></script>
	<script type="text/javascript" src="color_select.js"></script>
	<script type="text/javascript" src="graphics.js"></script>

	<link rel=stylesheet href=/manager/webserver/assets/css/style.css>
	<link rel="stylesheet" type="text/css" href="leditor.css">
</head>
<body class=manager style="max-width:845px; margin: auto;">
<div id='leditor_ui' style="height:570px; width:845px; overflow:hidden;">
	<table style="width:100%; border-collapse:collapse;">
	<tr style="height:90px;"><td>
		<table style="width:100%;">
			<tr style="height:90px;">
				<td style="vertical-align:top;">
					<img src="../assets/icon.svg" height="40" width="40" style="float:right;">
					<font size="5">LEDitor </font><span id="versionNr" style="font-size:12px;"></span>
					<div id="helpInfoArea" style="font-size:13px;" data-i18n="settings.intro"></div>
				</td>
			</tr>
		</table>
	</td></tr>
	<tr><td>
		<table id="editor" style="position:absolute; width:840px; border-collapse:collapse;">
		<tr>
			<td colspan=3>
				<!-- Top Bar -->
				<table id="animationInfoBar" style="width:800px; height:32px; border-collapse:collapse;">
					<tr style="height:32px; font-size:13px;">
						<td style="width:35px; text-align:left;">
							<button id="but_copy_ani" title="copy full animation from..." style="position:relative; left:0px; top:0px; width:35px; height:32px; vertical-align:middle; padding:0px 0px;" onclick="clickAniCopy(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/ani_copy.png" height="30" width="30" style="float:center;"></button>
						</td>
						<td style="width:120px; height:32px; text-align:left;">
							<div style=" position:relative; top:0px; left:0px; width:120px; height:32px;">
								<select id="dropAnimation" title="Select animation" style="position:absolute; top:0px; left:0px; width:120px; height:32px; padding:0px 0px;" onclick="selectAnimation(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" >
								<option value=""></option>
								</select>
								<input id="inName" type="text" style="position:absolute; left:4px; top:4px; width:108px; height:20px; padding:0px 0px; border:2px inset; visibility:hidden;" oninput="changeAniName(this);" onkeydown="checkForKey(this, event);" onchange="" onmouseover="this.focus(); showHelp(this, event);" onmouseout="showHelp(this, event)" />
							</div>

						</td>
						<td style="width:35px; text-align:left;">
							<button id="but_rename_ani" title="click to rename animation" style="position:relative; left:0px; top:0px; width:35px; height:32px; vertical-align:middle; padding:0px 0px;" onclick="clickAniRename(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/ani_rename.png" height="30" width="30" style="float:center;"></button>
						</td>
						<td style="width:70px; text-align:right;">
							<div id="frameCount"></div>
						</td>
						<td style="width:85px; text-align:left;">
								&nbsp;@ <input style="width:30px; height:20px; padding:0px 2px; border:1px solid Gainsboro;" id="inFPS" type="number" value="5" min="1" max="30" oninput="changeNumberSetting(this);" onmouseover="this.focus(); showHelp(this, event);" onmouseout="showHelp(this, event)" title="1 ... 30" /> FPS
						</td>
						<td id="aniTime" style="width:80px; text-align:left;">xxx.x sec.
						</td>
						<td style="width:85px; text-align:left;">
								&nbsp;<input style="width:30px; height:20px; padding:0px 2px; border:1px solid Gainsboro;" id="inTFPS" type="number" value="60" min="1" max="60" oninput="changeNumberSetting(this);" onmouseover="this.focus(); showHelp(this, event);" onmouseout="showHelp(this, event)" title="FPS ... 60" /> VFPS.
						</td>
						<td style="width:90px; text-align:left;">
							<input style="width:40px; height:20px; padding:0px 2px; border:1px solid Gainsboro;" id="inRPM" type="number" value="0" min="-127" max="127" oninput="changeNumberSetting(this);" onmouseover="this.focus(); showHelp(this, event);" onmouseout="showHelp(this, event)" title="-127 ... 127" /> RPM.
						</td>
						<td style="width:145px; ">
							<div style=" position:relative; top:0px; left:0px; width:140px; height:32px;">
							<button id="butPlay" class="buttonEdit" style="position:absolute; left:0px; top:0px;" onclick="clickPlay(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/ani_play.png" height="30" width="30" style="float:center;"></button>
							<button id="butPreview" class="buttonEdit" style="position:absolute; left:50px; top:0px;" onclick="clickPrev(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/homey_play.png" height="30" width="30" style="float:center;"></button>
							<div style="position:absolute; left:91px; top:6px; width:30px; height:20px; padding:0px 2px;">x</div>
							<input id="inRepeat" style="position:absolute; left:102px; top:6px; width:30px; height:20px; padding:0px 2px; border:1px solid Gainsboro;" type="number" value="1" min="1" max="20" oninput="changeNumberSetting(this);" onmouseover="this.focus(); showHelp(this, event);" onmouseout="showHelp(this, event)" />
							</div>
						</td>
						<td id="repeatTime" style="text-align:left;">00:00
						</td>
					</tr>
				</table>
			</td>
		</tr>
		<tr>
			<td style="width:400px; vertical-align:top;">
				<!-- list header -->
				<table style="width:100%; border-collapse:collapse;">
					<tr style="background-color:Gainsboro;">
						<th id="headerFrame" style="width:40px; text-align:center; font-size:10px;" data-i18n="settings.header_frame"></th>
						<th id="headerColors" style="width:240px; text-align:center;" data-i18n="settings.header_colors"></th>
						<td style="width:120px;">
						</td>
						<td>&nbsp;</td>
					</tr>
				</table>
				<!-- frames list -->
				<div id="divFrameScroll" style="width:398px; height:379px; border:1px solid Gainsboro; overflow:auto;">
					<table id="tableFrames" style="width:100%; border-collapse:collapse;" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"></table>
				</div>
				<div id="divButtons" style=" position:relative; top:1px; left:0px; width:400px; height:32px;">
					<!-- frame add/copy/import buttons -->
					<div id="flowtype_hide" style="position:absolute; left:0px; top:0px; width:400px; height:50px;" onmouseover="dropAniFlowType.style.visibility='hidden'; dropAniConnectType.style.visibility='hidden';"></div>
					<input type="file" accept="image/*" size="30" id="openLeditor" style="position:absolute; left:0px; top:0px; visibility:hidden;" />
					<button id="but_ani_store" disabled class="buttonEdit" style="position:absolute; left:0px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/ani_store.png" height="30" width="30" style="float:center;"></button>
					<button id="but_ani_open" disabled class="buttonEdit" style="position:absolute; left:40px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/ani_open.png" height="30" width="30" style="float:center;"></button>

					<button id="but_image_import" disabled class="buttonEdit" style="position:absolute; left:90px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/image_import.png" height="30" width="30" style="float:center;"></button>

					<button id="but_frame_add" disabled class="buttonEdit" style="position:absolute; left:140px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/frame_new.png" height="30" width="30" style="float:center;"></button>
					<button id="but_frame_copy" disabled class="buttonEdit" style="position:absolute; left:180px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/frame_duplicate.png" height="30" width="30" style="float:center;"></button>

					<button id="but_ani_fill_flow" disabled class="buttonEdit" style="position:absolute; left:230px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event); dropAniFlowType.style.visibility='visible'; dropAniConnectType.style.visibility='hidden';" onmouseout="showHelp(this, event)"><img src="../assets/images/ani_fill_flow.png" height="30" width="30" style="float:center;"></button>
					<button id="but_ani_fill_connect" disabled class="buttonEdit" style="position:absolute; left:270px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event); dropAniConnectType.style.visibility='visible'; dropAniFlowType.style.visibility='hidden';" onmouseout="showHelp(this, event)"><img src="../assets/images/ani_fill_connect.png" height="30" width="30" style="float:center;"></button>
					<button id="but_ani_delete" disabled class="buttonEdit" style="position:absolute; left:340px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/ani_delete.png" height="30" width="30" style="float:center;"></button>
					<select id="dropAniFlowType" style="position:absolute; left:230px; top:-14px; width:50px; height:15px; padding:0px 0px; border:0px; font-size:10px; font-weight:bold; visibility:hidden;" onclick="selectEdit(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event); this.style.visibility='hidden';" ></select>
					<select id="dropAniConnectType" style="position:absolute; left:270px; top:-14px; width:50px; height:15px; padding:0px 0px; border:0px; font-size:10px; font-weight:bold; visibility:hidden;" onclick="selectEdit(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event); this.style.visibility='hidden';" ></select>

					<svg height="40" width="350" style="position:absolute; top:0px; left:450px; width:350px; height:40px;" onmouseover="dropFlowType.style.visibility='hidden';">
							<line id="lineFrameAccess0" stroke-dasharray="1, 3" x1="20" y1="39" x2="265" y2="39" style="stroke:rgb(0,0,0); stroke-width:1;" />
							<line id="lineFrameAccess1" stroke-dasharray="1, 3" x1="20" y1="34" x2="20" y2="39" style="stroke:rgb(0,0,0); stroke-width:1;" />
							<line id="lineFrameAccess2" stroke-dasharray="1, 3" x1="60" y1="34" x2="60" y2="39" style="stroke:rgb(0,0,0); stroke-width:1;" />
							<line id="lineFrameAccess3" stroke-dasharray="1, 3" x1="110" y1="34" x2="110" y2="39" style="stroke:rgb(0,0,0); stroke-width:1;" />
							<line id="lineFrameAccess4" stroke-dasharray="1, 3" x1="150" y1="34" x2="150" y2="39" style="stroke:rgb(0,0,0); stroke-width:1;" />
							<line id="lineFrameAccess5" stroke-dasharray="1, 3" x1="200" y1="34" x2="200" y2="39" style="stroke:rgb(0,0,0); stroke-width:1;" />
							<line id="lineFrameAccess6" stroke-dasharray="1, 3" x1="240" y1="34" x2="240" y2="39" style="stroke:rgb(0,0,0); stroke-width:1;" />
							<line id="lineFrameAccess7" stroke-dasharray="1, 3" x1="278" y1="23" x2="265" y2="39" style="stroke:rgb(0,0,0); stroke-width:1.3;" />
					</svg>
					<button id="but_generator_close" disabled class="buttonEdit" style="position:absolute; left:400px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/editor.png" height="30" width="30" style="float:center;"></button>
					<button id="but_ani_generator" disabled class="buttonEdit" style="position:absolute; left:400px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/ani_generator.png" height="30" width="30" style="float:center;"></button>

					<button id="but_frame_clock" disabled class="buttonEdit" style="position:absolute; left:450px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/rotate_clockwise.png" height="30" width="30" style="float:center;"></button>
					<button id="but_frame_counterclock" disabled class="buttonEdit" style="position:absolute; left:490px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/rotate_counter_clockwise.png" height="30" width="30" style="float:center;"></button>

					<button id="but_frame_push" disabled class="buttonEdit" style="position:absolute; left:540px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/shift_back.png" height="30" width="30" style="float:center;"></button>
					<button id="but_frame_pull" disabled class="buttonEdit" style="position:absolute; left:580px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/shift_front.png" height="30" width="30" style="float:center;"></button>

					<button id="but_edit_fill" disabled class="buttonEdit" style="position:absolute; left:630px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event); dropFlowType.style.visibility='hidden';" onmouseout="showHelp(this, event)"><img src="../assets/images/fill_solid.png" height="30" width="30" style="float:center;"></button>
					<button id="but_edit_flow" disabled class="buttonEdit" style="position:absolute; left:670px; top:0px;" onclick="clickControl(this);" onmouseover="showHelp(this, event); dropFlowType.style.visibility='visible';" onmouseout="showHelp(this, event);"><img src="../assets/images/fill_flow.png" height="30" width="30" style="float:center;"></button>
					<select id="dropFlowType" style="position:absolute; left:670px; top:-14px; width:50px; height:15px; z-index:20; padding:0px 0px; border:0px; font-size:10px; font-weight:bold; visibility:hidden;" onclick="selectEdit(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event); this.style.visibility='hidden';" ></select>

					<div style="position:absolute; left:724px; top:10px; width:80px; height:15px; font-size:11px;">
						<input type="checkbox" id="checkAllFrames" style="cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" /><span style="cursor:pointer;" onclick="checkAllFrames.click();" onmouseover="showHelp(checkAllFrames, event)" onmouseout="showHelp(checkAllFrames, event)" data-i18n="settings.txt_check_all_frames"></span>
					</div>
				</div>
			</td>
			<td id="tdDisplay" style="vertical-align:top; overflow:hidden;">
				<!-- LED ring display -->
				<div id="parentRing" style="position:relative; left:0px; top:0px; width:400px; height:400px; background-color:#000000; overflow:hidden;">
					<div id="divRing" style="width:400px; height:400px;">
						<canvas id="canvRing" width="400" height="400" style="position:relative; left:0px; top:0px; width:400px; height:400px; filter:blur(0px);"></canvas>
						<canvas id="canvRing2" width="400" height="400" style="position:absolute; left:0px; top:0px; width:400px; height:400px; filter:blur(0px); transition-duration:1s;"></canvas>
					</div>
					<canvas id="canvTop" width="400" height="400" style="position:absolute; left:0px; top:0px; width:400px; height:400px;"></canvas>

					<div id="frameNumber" style="position:absolute; left:5px; top:0px; height:20px; width:100px; text-align:left; font-size:12px;">Frame:200</div>
					<div id="txtLedRing" style="position:absolute; left:200px; top:382px; height:18px; width:198px; text-align:right; font-size:9px;" data-i18n="settings.txt_ledring"></div>

					<!-- Central LED edit -->
					<div id="divEdit" style="position:absolute; top:0px; left:0px; width:400px; height:400px;">
						<div id="headerEditor" style="position:absolute; left:0px; top:90px; width:400px; text-align:center;" data-i18n="settings.header_editor"></div>
						<svg id="linePointer" height="400" width="400" style="position:absolute; top:0px; left:0px; width:400px; height:400px;">
							<line id="lPointer" stroke-dasharray="2, 2" x1="0" y1="0" x2="200" y2="200" style="stroke:rgb(0,0,0); stroke-width:2; transition:stroke .25s linear; visibility:hidden;" />
						</svg>
						<canvas id="canvLedMarkers" width="400" height="400" style="position:absolute; left:0px; top:0px; width:400px; height:400px;"></canvas>
						<div id="ledMarkers" style="top:0px; left:0px; width:400px; height:400px;"> </div>

						<div style="position:absolute; left:95px; top:150px; width:105px; height:20px; text-align:center; padding:0px 0px;" data-i18n="settings.txt_processing">Edit</div>
						<select id="dropFillType" style="position:absolute; left:95px; top:170px; width:105px; height:20px; padding:0px 0px;" onclick="selectEdit(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" >
							<option value="type_1" data-i18n="settings.txt_drop_type_1">1 or more</option>
							<option value="type_2" data-i18n="settings.txt_drop_type_2">skip</option>
							<option value="type_3" data-i18n="settings.txt_drop_type_3">fill</option>
						</select>

						<div style="position:absolute; left:200px; top:150px; width:105px; height:20px; text-align:center; padding:0px 0px;" data-i18n="settings.txt_range">Range</div>
						<select id="dropFillRange" style="position:absolute; left:200px; top:170px; width:105px; height:20px; padding:0px 0px;" onclick="selectEdit(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" >
							<option value="fill_2" data-i18n="settings.ed_fill_range_2">to every 2nd LED</option>
						</select>


						<div style="position:absolute; left:148px; top:205px; width:100px; height:20px; color:#000000; text-align:center;" data-i18n="settings.txt_led_setting"></div>
						<canvas id="colPreview" height="30" width="90" style="position:absolute; left:130px; top:225px; width:90px; height:30px; color:#ffffff; text-align:center; cursor:pointer; border-style:outset; border-width:1px; " onclick="clickControl(this);" onmouseover="showHelp(this, event);" onmouseout="showHelp(this, event)" data-i18n="settings.ed_apply_off"></canvas>
						<button id="but_color_acquire" class="buttonEdit" style="position:absolute; left:232px; top:225px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/color_pick.png" height="30" width="30" style="float:center;"></button>
					</div>
				</div>
				<!-- Pattern Generator -->
				<div id="generatePattern" style="position:absolute; left:400px; top:32px; width:400px; height:400px; overflow:hidden; visibility:hidden;">
					<table style="width:400px; border:none; border-collapse:collapse;">
						<tr>
							<td>
								<div id="headerGenerator" style="position:absolute; left:0px; top:90px; width:400px; text-align:center;" data-i18n="settings.header_generator"></div>
								<select id="dropGenerator" style="position:absolute; left:140px; top:120px; width:120px; height:20px; padding:0px 0px;" onclick="selectEdit(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" >
									<option value="gen_1" data-i18n="settings.generator_1"></option>
								</select>
								<div style="position:absolute; left:140px; top:145px; width:160px; height:20px;">
									<input type="checkbox" disabled id="checkRandomColors" style="cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><span id="txtRandomColors" style="cursor:pointer;" onclick="checkRandomColors.click();" onmouseover="if(!checkRandomColors.disabled){showHelp(checkRandomColors, event);}" onmouseout="showHelp(checkRandomColors, event)" data-i18n="settings.txt_random_colors"></span>
								</div>
								<div style="position:absolute; left:140px; top:165px; width:160px; height:20px;">
									<input type="checkbox" disabled id="checkFullFlow" style="cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><span id="txtFullFlow" style="cursor:pointer;" onclick="checkFullFlow.click();" onmouseover="if(!checkFullFlow.disabled){showHelp(checkFullFlow, event);}" onmouseout="showHelp(checkFullFlow, event)" data-i18n="settings.txt_full_flow"></span>
								</div>
								<table style="position:absolute; left:75px; top:190px;">
									<tr><td id="genFlowType" style="width:125px; text-align:right;" data-i18n="settings.title_but_edit_flow"></td><td style="width:125px;">
										<select id="dropGenFlowType" style="width:90px; height:20px; padding:0px 0px;" onclick="selectEdit(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" >
											<option value="gen_1" data-i18n="settings.generator_1"></option>
										</select>
									</td></tr>
									<tr><td id="genColInfo1" style="width:125px; text-align:right;"></td><td style="width:125px;">
										<button id="generatorCol1" class="buttonEdit" disabled style="width:90px; height:30px; color:#ffffff; border-style:outset; border-width:1px; text-align:center; cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">
											<canvas id="canvColGenerator1" height="28" width="90" style="color:#000000; text-align:center; border: 0px;">1</canvas>
										</button>
									</td></tr>
									<tr><td id="genColInfo2" style="width:125px; text-align:right;"></td><td style="width:125px;">
										<button id="generatorCol2" class="buttonEdit" disabled style="width:90px; height:30px; color:#ffffff; border-style:outset; border-width:1px; text-align:center; cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">
											<canvas id="canvColGenerator2" height="28" width="90" style="color:#000000; text-align:center; border: 0px;">2</canvas>
										</button>
									</td></tr>
									<tr><td id="genColInfo3" style="width:125px; text-align:right;"></td><td style="width:125px;">
										<button id="generatorCol3" class="buttonEdit" disabled style="width:90px; height:30px; color:#ffffff; border-style:outset; border-width:1px; text-align:center; cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">
											<canvas id="canvColGenerator3" height="28" width="90" style="color:#000000; text-align:center; border: 0px;">3</canvas>
										</button>
									</td></tr>

									<tr><td id="txtGenFrame" style="width:125px; text-align:right;"> Frames</td><td>
										<input id="inGenFrame" disabled style="width:50px; height:20px; padding:0px 2px; border:1px solid Gainsboro;" type="number" value="10" min="1" max="200" oninput="changeNumberSetting(this);" onmouseover="this.focus(); showHelp(this, event);" onmouseout="showHelp(this, event)" />
									</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</div>

				<!-- color select -->
				<div id="selectLedColor" style="position:absolute; left:400px; top:32px; width:400px; height:400px; overflow:hidden; visibility:hidden; background-color:#000000;">
					<canvas id="canvColorLed" width="345" height="400" style="position:absolute; left:50px; top:0px; width:345px; height:400px; filter:blur(0px);"></canvas>
					<canvas id="canvColorSet" width="400" height="400" style="position:absolute; left:0px; top:0px; width:400px; height:400px; filter:blur(0px);"></canvas>
					<svg id="arrowColor" height="60" width="60" style="position:absolute; top:27px; left:192px; width:60px; height:60px;">
 						<polygon points="30,0, 5,10, 20,10, 20,20, 40,20, 40,10, 55,10" style="fill:#3f3f3f;stroke:white;stroke-width:1" />
					</svg>
					<div id="divColorPal" style="position:absolute; top:0px; left:0px; width:240px; height:240px;"> </div>

					<div id="fullColSelect" style="position:absolute; top:0px; left:0px; width:400px; height:400px; overflow:hidden; visibility:hidden;">
						<div id="sliderColorValInfo" style="position:absolute; left:25px; top:59px; font-size:12px;" data-i18n="settings.txt_brightness"></div>
						<div id="sliderColorValValue" style="position:absolute; left:280px; top:59px; width:100px; text-align:right; font-size:12px;">x</div>
						<input type="range" id="sliderColorVal" min="0" max="1" step="0.005" value=0.5 class="sliderColor" style="top:80px;" oninput="sliderInput(this);" onwheel="sliderWheel(this, event);" ondblclick="sliderDouble(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" />
						<div id="sliderColorSatInfo" style="position:absolute; left:25px; top:109px; font-size:12px;" data-i18n="settings.txt_saturation"></div>
						<div id="sliderColorSatValue" style="position:absolute; left:280px; top:109px; width:100px; text-align:right; font-size:12px;">x</div>
						<input type="range" id="sliderColorSat" min="0" max="1" step="0.005" value=1 class="sliderColor" style="top:130px;" oninput="sliderInput(this);" onwheel="sliderWheel(this, event);" ondblclick="sliderDouble(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" />
						<div id="sliderColorHueInfo" style="position:absolute; left:25px; top:159px; font-size:12px;" data-i18n="settings.txt_hue"></div>
						<div id="sliderColorHueValue" style="position:absolute; left:280px; top:159px; width:100px; text-align:right; font-size:12px;">x</div>
						<input type="range" id="sliderColorHue" min="0" max="1" step="0.002777777778" value=0 class="sliderColor" style="top:180px;" oninput="sliderInput(this);" onwheel="sliderWheel(this, event);" ondblclick="sliderDouble(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" />

						<div id="userColors"></div>
						<button id="colPreset0" class="buttonColPreset" onclick="initColorPreset(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">Off</button>
						<button id="colPreset1" class="buttonColPreset" onclick="initColorPreset(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">Red</button>
						<button id="colPreset2" class="buttonColPreset" onclick="initColorPreset(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">Yellow</button>
						<button id="colPreset3" class="buttonColPreset" onclick="initColorPreset(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">Green</button>
						<button id="colPreset4" class="buttonColPreset" onclick="initColorPreset(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">Cyan</button>
						<button id="colPreset5" class="buttonColPreset" onclick="initColorPreset(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">Blue</button>
						<button id="colPreset6" class="buttonColPreset" onclick="initColorPreset(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">Magenta</button>
						<button id="colPreset7" class="buttonColPreset" onclick="initColorPreset(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">White</button>
					</div>
					<button id="but_color_select_type" class="buttonEdit" style="position:absolute; left:5px; top:5px;" onclick="initColorSelectType();" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"></button>
					<button id="ledPrev1" value="off" class="buttonLedPrev" style="left:55px;" onclick="clickLedPreview(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">same</button>
					<button id="ledPrev2" value="off" class="buttonLedPrev" style="left:115px;" onclick="clickLedPreview(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">inv</button>
					<button id="ledPrev3" value="off" class="buttonLedPrev" style="left:235px;" onclick="clickLedPreview(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">off</button>
					<button id="ledPrev4" value="off" class="buttonLedPrev" style="left:295px;" onclick="clickLedPreview(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">inv</button>
					<input type="checkbox" checked id="colorDirectSelect"  style="position:absolute; left:172px; top:370px; width:20px; cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" /><span id="colorDirectSelectInfo" style="position:absolute; left:40px; top:366px; width:130px; text-align:right; font-size:12px; cursor:pointer;" onclick="colorDirectSelect.click()" onmouseover="showHelp(colorDirectSelect, event)" onmouseout="showHelp(colorDirectSelect, event)" data-i18n="settings.txt_direct_select">Direct select</span>
					<button id="but_color_select_accept" class="buttonEdit" style="position:absolute; left:194px; top:360px; width:100px;" onclick="initColorSelection(false, true);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/accept.png" height="30" width="30" style="float:center;"></button>
					<button id="but_color_select_cancel" class="buttonEdit" style="position:absolute; left:292px; top:360px; width:100px;" onclick="initColorSelection(false);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/cancel.png" height="30" width="30" style="float:center;"></button>
				</div>
			</td>
			<td style="width:40px;">
				<div id="divFrameEdit2" style=" position:relative; top:0px; left:0px; width:40px; height:432px;">
					<button id="but_settings" class="buttonEdit" style="position:absolute; left:0px; top:-32px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/settings.png" height="30" width="30" style="float:center;"></button>
					<span id="numberRedo" style="position:absolute; left:0px; top:350px; width:40px; height:15px; font-size:12px; text-align:right;">10&nbsp;</span>
					<button id="but_edit_redo" class="buttonEdit" style="position:absolute; left:0px; top:336px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/edit_redo.png" height="30" width="30" style="float:center;"></button>
					<span id="numberUndo" style="position:absolute; left:0px; top:382px; width:40px; height:15px; font-size:12px; text-align:left;">&nbsp;10</span>
					<button id="but_edit_undo" class="buttonEdit" style="position:absolute; left:0px; top:368px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/edit_undo.png" height="30" width="30" style="float:center;"></button>
				</div>
				<img id="butTopColor" src="../assets/images/icon_bw.png" height="20" width="20" style="position:absolute; left:410px; top:403px; width:20px; height:20px; padding:0px 0px; cursor:pointer; transform:rotate(-90deg)" onclick="clickControl(this)" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">

			</td>
		</tr>
		</table>
		<!-- image import -->
		<table id="imageImporter" style="position:relative; left:0px; top:0px; width:844px; visibility:hidden; border-collapse:collapse;">
			<tr style="height:35px; background-color:#ffffff;">
				<th style="width:400px; background-color:Gainsboro; text-align:center;">
					<div data-i18n="settings.txt_led_colors">LED colors</div>
				</th>
				<td style="width:50px;background-color:Gainsboro; text-align:center;"></td>
				<th style="width:400px; background-color:Gainsboro; text-align:center;">
					<div data-i18n="settings.txt_image_selection"></div>
				</th>
			</tr>
			<tr style="position:absolute; left:0px; top:35px; height:433px; background-color:#ffffff;">
				<td style="width:400px;">
					<div id="divImageFrames" style="position:absolute; top:0px; left:0px; width:400px; height:398px; border:1px solid Gainsboro; overflow:auto;">
						<canvas id="canvImportedFrames" width="380" height="390" style="position:relative; left:0px; top:0px;" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"></canvas>
					</div>
					<input type="file" accept="image/*" name="img" size="30" id="uploadimage" style="position:absolute; left:0px; top:400px; visibility:hidden;" />
					<button id="but_open_image" class="buttonEdit" style="position:absolute; left:0px; top:400px;" onclick="uploadimage.click();" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img id="iconOpenImage" src="../assets/images/open_image.png" height="30" width="30" style="float:center;"></button>
					<button id="but_import_accept" class="buttonEdit" style="position:absolute; left:320px; top:400px;" onclick="closeImport(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/accept.png" height="30" width="30" style="float:center;"></button>
					<button id="but_import_cancel" class="buttonEdit" style="position:absolute; left:360px; top:400px;" onclick="closeImport(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/cancel.png" height="30" width="30" style="float:center;"></button>
				</td>
				<td style="width:40px;">
					<div style="position:absolute; left:400px; top:0px; width:40px; height:100px;">
						<div id="sliderDimmerVal" style="position:absolute; left:0px; top:2px; width:30px; height:15px; font-size:12px; text-align:center;">0</div>
						<input type="range" id="sliderDimmer" min="-0.99" max="0" step="0.01" value=0 class="sliderImport" oninput="sliderImportInput(this);" onwheel="sliderImportWheel(this, event);" ondblclick="sliderImportDouble(this);" onmouseover="this.focus(); showHelp(this, event)" onmouseout="showHelp(this, event)" />
						<div style="position:absolute; left:-8px; top:50px; width:80px; height:15px; font-size:12px; text-align:center; transform:rotate(-90deg);" data-i18n="settings.txt_dimmer">Dimmer</div>
					</div>
					<div style="position:absolute; left:400px; top:100px; width:40px; height:100px;">
						<div id="sliderHueVal" class="sliderImportVal" style="position:absolute; left:3px; top:2px; width:30px; height:15px; font-size:12px; text-align:center;">0&deg;</div>
						<input type="range" id="sliderHue" min="-0.5" max="0.5" step="0.0027777" value=0 class="sliderImport" oninput="sliderImportInput(this);" onwheel="sliderImportWheel(this, event);" ondblclick="sliderImportDouble(this);" onmouseover="this.focus(); showHelp(this, event)" onmouseout="showHelp(this, event)" />
						<div style="position:absolute; left:-8px; top:50px; width:80px; height:15px; font-size:12px; text-align:center; transform:rotate(-90deg);" data-i18n="settings.txt_hue">Hue</div>
					</div>
					<div style="position:absolute; left:400px; top:200px; width:40px; height:100px;">
						<div id="sliderSaturationVal" style="position:absolute; left:0px; top:2px; width:30px; height:15px; font-size:12px; text-align:center;">0</div>
						<input type="range" id="sliderSaturation" min="-1" max="1" step="0.01" value=0 class="sliderImport" oninput="sliderImportInput(this);" onwheel="sliderImportWheel(this, event);" ondblclick="sliderImportDouble(this);" onmouseover="this.focus(); showHelp(this, event)" onmouseout="showHelp(this, event)" />
						<div style="position:absolute; left:-8px; top:50px; width:80px; height:15px; font-size:12px; text-align:center; transform:rotate(-90deg);" data-i18n="settings.txt_saturation">Saturation</div>
					</div>
					<div style="position:absolute; left:400px; top:300px; width:40px; height:100px;">
						<div id="sliderLightnessVal" style="position:absolute; left:0px; top:2px; width:30px; height:15px; font-size:12px; text-align:center;">0</div>
						<input type="range" id="sliderLightness" min="-0.995" max="0.995" step="0.005" value=0 class="sliderImport" oninput="sliderImportInput(this);" onwheel="sliderImportWheel(this, event);" ondblclick="sliderImportDouble(this);" onmouseover="this.focus(); showHelp(this, event)" onmouseout="showHelp(this, event)" />
						<div style="position:absolute; left:-8px; top:50px; width:80px; height:15px; font-size:12px; text-align:center; transform:rotate(-90deg);" data-i18n="settings.txt_lightness">Lightness</div>
					</div>
				</td>
				<td style="width:400px;">
					<canvas id="canvImgAni" width="200" height="25" style="visibility:hidden;"></canvas>
					<canvas id="canvImage" width="400" height="400" style="position:absolute; left:2px; top:2px;" onmousedown="imageMouseDown(this, event)" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"></canvas>
					<div id="importArea" style="position:absolute; left:0px; top:0px; border:2px dotted #000000; transition:border-color .5s linear;" onmousedown="imageMouseDown(this, event);" onmousemove="imageMouseMove(event);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)">
						<canvas id="canvImport" width="200" height="24" style="visibility:hidden; position:absolute; left:0px; top:0px;"></canvas>
						<canvas id="canvImportV" width="200" height="24" style="position:absolute; left:0px; top:0px;"></canvas>
					</div>
					<button id="but_scan_direction" class="buttonEdit" style="position:absolute; left:444px; top:400px;" onclick="changeScanAspect()" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img id="iconScanDir" src="../assets/images/scan_right.png" height="30" width="30" style="float:center;"></button>
					<div style="position:absolute; left:504px; top:400px; width:80px; height:32px;">
						<input id="inFrames" style="width:40px; height:20px; padding:0px 2px; border:1px solid Gainsboro;" type="number" value="200" min="1" max="200" oninput="changeNumberSetting(this);" onmouseover="this.focus(); showHelp(this, event)" onmouseout="showHelp(this, event)" /><div style="font-size:12px">frames</div>
					</div>
					<div style="position:absolute; left:680px; top:400px; width:160px; height:32px;">
						<div style="position:absolute; left:0px; top:-2px; width:80px; height:15px; font-size:12px; text-align:right;" data-i18n="settings.txt_zoom">Zoom</div>
						<div id="sliderZoomVal" style="position:absolute; left:90px; top:-2px; width:70px; height:15px; font-size:12px; text-align:left;">100%</div>
						<input type="range" id="sliderZoom" min="0" max="0.99" step="0.0025" value=0 style="position:absolute; left:0px; top:20px; width:160px; height:10px; padding:0px 0px; border:0px;" oninput="sliderImportInput(this);" onwheel="sliderImportWheel(this, event);" ondblclick="sliderImportDouble(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" />
					</div>
				</td>
			</tr>
		</table>
		<!-- save animation -->
		<table id="imageExporter" style="position:relative; left:195px; top:-44px; width:450px; background-color:#ffffff; visibility:hidden; border:2px #7f7f7f solid; border-collapse:collapse; box-shadow:0px 0px 30px rgba(0,0,16,0.5);">
			<tr style="height:34px;">
				<th style="background-color:Gainsboro; text-align:center;"><span data-i18n="settings.header_export"></span>
					<button id="but_export_cancel" class="buttonEdit" style="position:absolute; left:406px; top:1px;" onclick="closeExport(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/cancel.png" height="30" width="30" style="float:center;"></button>
				</th>
			</tr>
			<tr style="height:50px;">
				<th style="text-align:center; background-color:#f0f0f0;">
					<a id="imageExport" download="LEDitor.png" href="">
						<canvas id="canvImageExport" width="200" height="25" style="background-color:#808080;" ></canvas>
					</a>
				</th>
			</tr>
			<tr>
				<td style="text-align:left; vertical-align:top; background-color:#f0f0f0; padding:10px 10px;" data-i18n="settings.txt_save_animation"></td>
			</tr>
		</table>
		<!-- settings window -->
		<table id="settingsWindow" style="position:relative; left:130px; top:-350px; width:560px; background-color:rgba(240,240,240,1); visibility:hidden; border:2px #7f7f7f solid; border-collapse:collapse; box-shadow:0px 0px 30px rgba(0,0,16,0.5);">
			<tr style="height:34px;">
				<th style="background-color:Gainsboro; text-align:center;"><span data-i18n="settings.header_settings"></span>
					<button id="but_settings_cancel" class="buttonEdit" style="position:absolute; left:516px; top:1px;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"><img src="../assets/images/cancel.png" height="30" width="30" style="float:center;"></button>
				</th>
			</tr>
			<tr>
				<td style="padding:10px 10px;">
					<table style="width:100%;">
					<tr>
						<td style="text-align:right; cursor:pointer;" onclick="settingControlInfo.click();" onmouseover="showHelp(settingControlInfo, event);" onmouseout="showHelp(settingControlInfo, event);" data-i18n="settings.txt_settings_show_info">Show control info on top</td>
						<td style="text-align:left;">
							&nbsp;<input type="checkbox" checked id="settingControlInfo" style="cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" />
						</td>
					</tr>
					<tr>
						<td style="text-align:right; cursor:pointer;" onclick="settingShowHomey.click();" onmouseover="showHelp(settingShowHomey, event);" onmouseout="showHelp(settingShowHomey, event);" data-i18n="settings.txt_settings_show_homey">Show on Homey</td>
						<td style="text-align:left;">
							&nbsp;<input type="checkbox" id="settingShowHomey" style="cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)" />
							<span onclick="settingShowHomey.click();" onmouseover="showHelp(settingShowHomey, event);" onmouseout="showHelp(settingShowHomey, event);" data-i18n="settings.txt_settings_show_homey_time_pre"></span> <input type="number" id="settingShowHomeyTime" style="width:30px; height:20px; padding:0px 2px;" value="5" min="5" max="60" step="1" oninput="changeNumberSetting(this);" onmouseover="this.focus();" /> <span onclick="settingShowHomey.click();" onmouseover="showHelp(settingShowHomey, event);" onmouseout="showHelp(settingShowHomey, event);" data-i18n="settings.txt_settings_show_homey_time_post"></span>.
						</td>
					</tr>
					<tr>
						<td style="text-align:right;" onclick="settingGammaR.click();" onmouseover="showHelp(settingGammaR, event);" onmouseout="showHelp(settingGammaR, event);" data-i18n="settings.txt_settings_gamma">On-screen LEDs gamma:</td>
						<td style="text-align:left;">
							&nbsp;R:<input type="number" id="settingGammaR" style="width:40px; height:20px; padding:0px 2px;" value="2.5" min="1" max="5" step="0.1" oninput="changeNumberSetting(this);" onmouseover="this.focus(); showHelp(this, event);" onmouseout="showHelp(this, event)" />
							&nbsp;G:<input type="number" id="settingGammaG" disabled style="width:40px; height:20px; padding:0px 2px;" value="2.5" min="1" max="5" step="0.1" oninput="changeNumberSetting(this);" onmouseover="this.focus(); showHelp(settingGammaR, event);" onmouseout="showHelp(settingGammaR, event);" />
							&nbsp;B:<input type="number" id="settingGammaB" disabled style="width:40px; height:20px; padding:0px 2px;" value="2.5" min="1" max="5" step="0.1" oninput="changeNumberSetting(this);" onmouseover="this.focus(); showHelp(settingGammaR, event);" onmouseout="showHelp(settingGammaR, event);" />
							&nbsp;<input type="checkbox" id="settingGammaLink" checked style="cursor:pointer;" onclick="clickControl(this);" onmouseover="showHelp(this, event)" onmouseout="showHelp(this, event)"></input><span style="cursor:pointer;" onclick="settingGammaLink.click()" onmouseover="showHelp(settingGammaLink, event)" onmouseout="showHelp(settingGammaLink, event)">Link</span>
						</td>
					</tr>
					</table>
				</td>
			</tr>
		</table>
		<div id="infoMessage" style="position:absolute; top:200px; left:230px; width:340px; height:50px; line-height:50px; border:solid 2px #808080; visibility:hidden; background-color:#ffffff; text-align:center; vertical-align:middle; font-weight:bold;" data-i18n="settings.info_load">Info Test</div>

	</td></tr></table>

	<!-- script order may be important because of dependency! -->
	<script type="text/javascript" src="generators.js"></script>
	<script type="text/javascript" src="save_load.js"></script>
	<script type="text/javascript" src="image_to_animation.js"></script>
	<script type="text/javascript" src="onscreen_animation.js"></script>
	<script type="text/javascript" src="edit_routines.js"></script>
	<script type="text/javascript" src="edit_animation.js"></script>
	<script type="text/javascript" src="edit_frame.js"></script>
	<script type="text/javascript" src="leditor.js"></script>
	<script type="text/javascript" src="onHomeyReady.js"></script>
</div>
</body>
</html>
